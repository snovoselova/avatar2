<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Enter Key with Checkbox</title>
</head>
<body>
    <h1>Test: Enter Key with Phone + Checkbox Validation</h1>
    
    <!-- Simulate the phone field structure from register.html -->
    <div class="phone-field">
        <div class="country-code">+7</div>
        <input type="tel" placeholder="(9XX) XXX-XX-XX" pattern="[0-9]{10}" required>
    </div>
    
    <a href="paywall.html" class="btn">ЗАРЕГИСТРИРОВАТЬСЯ</a>
    
    <input type="checkbox" id="agree" required>
    <label for="agree">Agreement checkbox</label>
    
    <div id="result"></div>
    
    <script>
        const phoneInput = document.querySelector('input[type="tel"]');
        const registerBtn = document.querySelector('.btn[href="paywall.html"]');
        const agreeCheckbox = document.querySelector('#agree');
        const resultDiv = document.getElementById('result');
        
        if (registerBtn && phoneInput && agreeCheckbox) {
            // Override the click method to test
            registerBtn.addEventListener('click', function(e) {
                e.preventDefault();
                resultDiv.innerHTML = '<p style="color: green;">SUCCESS: Registration button was clicked!</p>';
                console.log('Registration button clicked via Enter key');
            });
            
            // Add the updated Enter key listener with checkbox validation
            phoneInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const phoneValue = phoneInput.value.replace(/\D/g, '');
                    const isPhoneValid = phoneValue.length === 10;
                    const isAgreed = agreeCheckbox.checked;
                    
                    console.log('Enter pressed, phone digits:', phoneValue.length, 'checkbox:', isAgreed);
                    
                    if (isPhoneValid && isAgreed) {
                        registerBtn.click();
                    } else {
                        let message = 'FAILED: ';
                        if (!isPhoneValid) {
                            message += 'Phone number must have 10 digits (current: ' + phoneValue.length + '). ';
                        }
                        if (!isAgreed) {
                            message += 'Checkbox must be checked.';
                        }
                        resultDiv.innerHTML = '<p style="color: red;">' + message + '</p>';
                    }
                }
            });
        }
    </script>
    
    <div style="margin-top: 20px;">
        <h3>Test Instructions:</h3>
        <ol>
            <li><strong>Test 1:</strong> Enter 10 digits, don't check checkbox, press Enter → Should fail</li>
            <li><strong>Test 2:</strong> Enter less than 10 digits, check checkbox, press Enter → Should fail</li>
            <li><strong>Test 3:</strong> Enter 10 digits, check checkbox, press Enter → Should succeed</li>
        </ol>
        <p><strong>Example phone number:</strong> 9123456789</p>
    </div>
</body>
</html>